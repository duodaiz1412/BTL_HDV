{"ast":null,"code":"var _jsxFileName = \"D:\\\\BTL_HDV\\\\mid-project-379283427\\\\frontend\\\\src\\\\components\\\\SeatSelection.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getSeats, checkSeats } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SeatSelection = ({\n  showtimeId,\n  onSeatsSelected\n}) => {\n  _s();\n  const [seats, setSeats] = useState([]);\n  const [selectedSeats, setSelectedSeats] = useState([]);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    const fetchSeats = async () => {\n      try {\n        const response = await getSeats(showtimeId);\n        setSeats(response.data);\n      } catch (err) {\n        setError('Không thể tải thông tin ghế');\n      }\n    };\n    fetchSeats();\n  }, [showtimeId]);\n  const handleSeatClick = async seat => {\n    if (seat.status === 'booked') return;\n    const newSelectedSeats = selectedSeats.includes(seat.seat_number) ? selectedSeats.filter(s => s !== seat.seat_number) : [...selectedSeats, seat.seat_number];\n    setSelectedSeats(newSelectedSeats);\n    try {\n      if (newSelectedSeats.length > 0) {\n        await checkSeats(showtimeId, newSelectedSeats);\n        onSeatsSelected(newSelectedSeats);\n      }\n    } catch (err) {\n      setError('Ghế đã được đặt');\n      setSelectedSeats(selectedSeats.filter(s => s !== seat.seat_number));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Ch\\u1ECDn gh\\u1EBF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500 mb-4\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-8 gap-2\",\n      children: seats.map(seat => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleSeatClick(seat),\n        disabled: seat.status === 'booked',\n        className: `\n              p-2 rounded text-center\n              ${seat.status === 'booked' ? 'bg-gray-300 cursor-not-allowed' : selectedSeats.includes(seat.seat_number) ? 'bg-blue-600 text-white' : 'bg-gray-100 hover:bg-gray-200'}\n            `,\n        children: seat.seat_number\n      }, seat.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-4 h-4 bg-gray-100 rounded mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Gh\\u1EBF tr\\u1ED1ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-4 h-4 bg-gray-300 rounded mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0110\\xE3 \\u0111\\u1EB7t\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-4 h-4 bg-blue-600 rounded mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0110\\xE3 ch\\u1ECDn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(SeatSelection, \"XM4SzleZlJ2KfLtYBGxfYnWywu4=\");\n_c = SeatSelection;\nexport default SeatSelection;\nvar _c;\n$RefreshReg$(_c, \"SeatSelection\");","map":{"version":3,"names":["React","useState","useEffect","getSeats","checkSeats","jsxDEV","_jsxDEV","SeatSelection","showtimeId","onSeatsSelected","_s","seats","setSeats","selectedSeats","setSelectedSeats","error","setError","fetchSeats","response","data","err","handleSeatClick","seat","status","newSelectedSeats","includes","seat_number","filter","s","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","onClick","disabled","id","_c","$RefreshReg$"],"sources":["D:/BTL_HDV/mid-project-379283427/frontend/src/components/SeatSelection.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getSeats, checkSeats } from '../services/api';\r\n\r\nconst SeatSelection = ({ showtimeId, onSeatsSelected }) => {\r\n  const [seats, setSeats] = useState([]);\r\n  const [selectedSeats, setSelectedSeats] = useState([]);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchSeats = async () => {\r\n      try {\r\n        const response = await getSeats(showtimeId);\r\n        setSeats(response.data);\r\n      } catch (err) {\r\n        setError('Không thể tải thông tin ghế');\r\n      }\r\n    };\r\n    fetchSeats();\r\n  }, [showtimeId]);\r\n\r\n  const handleSeatClick = async (seat) => {\r\n    if (seat.status === 'booked') return;\r\n\r\n    const newSelectedSeats = selectedSeats.includes(seat.seat_number)\r\n      ? selectedSeats.filter(s => s !== seat.seat_number)\r\n      : [...selectedSeats, seat.seat_number];\r\n\r\n    setSelectedSeats(newSelectedSeats);\r\n\r\n    try {\r\n      if (newSelectedSeats.length > 0) {\r\n        await checkSeats(showtimeId, newSelectedSeats);\r\n        onSeatsSelected(newSelectedSeats);\r\n      }\r\n    } catch (err) {\r\n      setError('Ghế đã được đặt');\r\n      setSelectedSeats(selectedSeats.filter(s => s !== seat.seat_number));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <h3 className=\"text-xl font-semibold mb-4\">Chọn ghế</h3>\r\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n      <div className=\"grid grid-cols-8 gap-2\">\r\n        {seats.map((seat) => (\r\n          <button\r\n            key={seat.id}\r\n            onClick={() => handleSeatClick(seat)}\r\n            disabled={seat.status === 'booked'}\r\n            className={`\r\n              p-2 rounded text-center\r\n              ${seat.status === 'booked' \r\n                ? 'bg-gray-300 cursor-not-allowed' \r\n                : selectedSeats.includes(seat.seat_number)\r\n                ? 'bg-blue-600 text-white'\r\n                : 'bg-gray-100 hover:bg-gray-200'\r\n              }\r\n            `}\r\n          >\r\n            {seat.seat_number}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      <div className=\"mt-4 flex gap-4\">\r\n        <div className=\"flex items-center\">\r\n          <div className=\"w-4 h-4 bg-gray-100 rounded mr-2\"></div>\r\n          <span>Ghế trống</span>\r\n        </div>\r\n        <div className=\"flex items-center\">\r\n          <div className=\"w-4 h-4 bg-gray-300 rounded mr-2\"></div>\r\n          <span>Đã đặt</span>\r\n        </div>\r\n        <div className=\"flex items-center\">\r\n          <div className=\"w-4 h-4 bg-blue-600 rounded mr-2\"></div>\r\n          <span>Đã chọn</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SeatSelection; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}